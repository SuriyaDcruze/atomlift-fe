name: Deploy React Frontend to EC2

on:
push:
branches:
- main  # Trigger deployment on push to main branch

jobs:
build-and-deploy:
runs-on: self-hosted  # Runs on your EC2 runner
steps:
# Step 1: Checkout repository
- name: Checkout repository
uses: actions/checkout@v3

```
  # Step 2: Setup Node.js
  - name: Setup Node.js
    uses: actions/setup-node@v3
    with:
      node-version: '20'

  # Step 3: Install dependencies
  - name: Install dependencies
    run: npm ci

  # Step 4: Build React app
  - name: Build React App
    run: npm run build

  # Step 5: Copy build files to Nginx folder
  - name: Deploy to Nginx
    run: |
      sudo mkdir -p /var/www/react-app
      sudo cp -r build/* /var/www/react-app/
      sudo rm -rf /usr/share/nginx/html/*
      sudo cp -r /var/www/react-app/* /usr/share/nginx/html/
      sudo systemctl restart nginx
```
